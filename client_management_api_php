<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Management API Documentation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: #333;
            background-color: #f8f9fa;
        }
        .method-get {
            background-color: #61affe;
            color: white;
        }
        .method-post {
            background-color: #49cc90;
            color: white;
        }
        .method-put {
            background-color: #fca130;
            color: white;
        }
        .method-delete {
            background-color: #f93e3e;
            color: white;
        }
        .response-area {
            min-height: 150px;
            max-height: 300px;
        }
        .endpoint-section {
            border-left: 4px solid #e5e7eb;
            transition: border-color 0.3s;
        }
        .endpoint-section:hover {
            border-left-color: #3b82f6;
        }
        code {
            font-family: 'Courier New', monospace;
        }
        pre {
            white-space: pre-wrap;
        }
        .parameter-table tr:nth-child(even) {
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="pb-20">
    <header class="bg-white shadow">
        <div class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Client Management API</h1>
                    <p class="mt-1 text-sm text-gray-600">API endpoint for managing master client list operations</p>
                </div>
                <div class="text-right">
                    <span class="px-3 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium">Version 1.0</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
        <div class="bg-white shadow rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4">API Overview</h2>
            <p class="mb-4">The Client Management API provides endpoints for creating, retrieving, updating, and deleting client records in the master client list. It also supports filtering clients by various criteria including days not played and deposit tags.</p>
            
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="p-4 border rounded-lg bg-blue-50">
                    <div class="flex items-center">
                        <div class="rounded-full bg-blue-500 p-2 mr-3">
                            <i class="fas fa-search text-white"></i>
                        </div>
                        <span class="text-lg font-medium">Get Clients</span>
                    </div>
                    <p class="mt-2 text-sm text-gray-600">Retrieve client records with filtering options</p>
                </div>
                
                <div class="p-4 border rounded-lg bg-green-50">
                    <div class="flex items-center">
                        <div class="rounded-full bg-green-500 p-2 mr-3">
                            <i class="fas fa-plus text-white"></i>
                        </div>
                        <span class="text-lg font-medium">Add Client</span>
                    </div>
                    <p class="mt-2 text-sm text-gray-600">Create a new client record</p>
                </div>
                
                <div class="p-4 border rounded-lg bg-yellow-50">
                    <div class="flex items-center">
                        <div class="rounded-full bg-yellow-500 p-2 mr-3">
                            <i class="fas fa-edit text-white"></i>
                        </div>
                        <span class="text-lg font-medium">Update Client</span>
                    </div>
                    <p class="mt-2 text-sm text-gray-600">Modify an existing client record</p>
                </div>
                
                <div class="p-4 border rounded-lg bg-red-50">
                    <div class="flex items-center">
                        <div class="rounded-full bg-red-500 p-2 mr-3">
                            <i class="fas fa-trash text-white"></i>
                        </div>
                        <span class="text-lg font-medium">Delete Client</span>
                    </div>
                    <p class="mt-2 text-sm text-gray-600">Remove a client from the system</p>
                </div>
            </div>
            
            <div class="mt-8">
                <h3 class="text-xl font-semibold mb-3">Base URL</h3>
                <div class="bg-gray-100 p-3 rounded-md">
                    <code>https://yourcrmdomain.com/api/client_management_api.php</code>
                </div>
                <p class="mt-2 text-sm text-gray-600">All endpoints are relative to this base URL</p>
            </div>
            
            <div class="mt-8">
                <h3 class="text-xl font-semibold mb-3">Authentication</h3>
                <p class="mb-3">All API requests require authentication using an API key or session token.</p>
                <div class="bg-gray-100 p-3 rounded-md">
                    <pre><code>// Example header for authentication
Authorization: Bearer {your_api_token}

// Alternative: Session-based authentication
// Must have an active admin session cookie</code></pre>
                </div>
            </div>
        </div>

        <!-- Endpoint Documentation -->
        <div class="bg-white shadow rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-6">API Endpoints</h2>
            
            <!-- Get Clients Endpoint -->
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-get px-3 py-1 rounded-md font-medium text-sm mr-3">GET</span>
                    <h3 class="text-xl font-semibold">/getClients</h3>
                </div>
                <p class="mb-4">Retrieves client records with optional filtering parameters.</p>
                
                <h4 class="text-lg font-medium mb-2">Parameters</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">search</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Search term for client ID or mobile number</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">min_days_not_played</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Minimum number of days client hasn't played</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">max_days_not_played</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Maximum number of days client hasn't played</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">deposit_tag</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Filter by deposit tag (e.g., "Under 5K", "More than 50K")</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">min_deposit</td>
                                <td class="px-4 py-2 text-sm text-gray-500">number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Minimum deposit amount</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">max_deposit</td>
                                <td class="px-4 py-2 text-sm text-gray-500">number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Maximum deposit amount</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">page</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Page number for pagination (default: 1)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">limit</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Number of clients per page (default: 50, max: 100)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "total_clients": 1542,
  "page": 1,
  "per_page": 50,
  "total_pages": 31,
  "clients": [
    {
      "id": 1,
      "client_id_name": "ABCD1234",
      "mobile_number": "9876543210",
      "deposit_amount": 12500,
      "deposit_tag": "Under 15K",
      "last_played_date": "2025-04-20",
      "days_not_played": 8,
      "created_by": 2,
      "created_at": "2025-01-15 10:30:45"
    },
    {
      "id": 2,
      "client_id_name": "EFGH5678",
      "mobile_number": "8765432109",
      "deposit_amount": 45000,
      "deposit_tag": "Under 50K",
      "last_played_date": "2025-04-25",
      "days_not_played": 3,
      "created_by": 3,
      "created_at": "2025-01-20 14:15:30"
    }
    // ... more clients
  ]
}</code></pre>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Example Request</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>GET /client_management_api.php?action=getClients&min_days_not_played=7&deposit_tag=Under%2015K&page=1&limit=50

// With authentication header
Authorization: Bearer {your_api_token}</code></pre>
                </div>
                
                <div class="mt-4 bg-blue-50 border border-blue-200 rounded-md p-4">
                    <h4 class="text-lg font-medium mb-2 flex items-center">
                        <i class="fas fa-flask mr-2 text-blue-600"></i>
                        Test This Endpoint
                    </h4>
                    <form id="getClientsForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Search term</label>
                                <input type="text" name="search" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Deposit tag</label>
                                <select name="deposit_tag" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    <option value="">Any</option>
                                    <option value="Under 5K">Under 5K</option>
                                    <option value="Under 10K">Under 10K</option>
                                    <option value="Under 15K">Under 15K</option>
                                    <option value="Under 20K">Under 20K</option>
                                    <option value="Under 30K">Under 30K</option>
                                    <option value="Under 50K">Under 50K</option>
                                    <option value="More than 50K">More than 50K</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Min days not played</label>
                                <input type="number" name="min_days_not_played" min="0" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Max days not played</label>
                                <input type="number" name="max_days_not_played" min="0" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <i class="fas fa-play mr-2"></i>
                                Test Request
                            </button>
                        </div>
                    </form>
                    <div class="mt-4">
                        <h5 class="text-sm font-medium text-gray-700 mb-1">Response:</h5>
                        <div id="getClientsResponse" class="bg-gray-800 text-green-400 p-3 rounded-md response-area overflow-auto">
                            <code>// Response will appear here</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add Client Endpoint -->
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-post px-3 py-1 rounded-md font-medium text-sm mr-3">POST</span>
                    <h3 class="text-xl font-semibold">/addClient</h3>
                </div>
                <p class="mb-4">Creates a new client record in the master client list.</p>
                
                <h4 class="text-lg font-medium mb-2">Request Body</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">client_id_name</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Yes</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Unique identifier or name for the client</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">mobile_number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Yes</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Client's mobile number</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">deposit_amount</td>
                                <td class="px-4 py-2 text-sm text-gray-500">number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Initial deposit amount (tag will be auto-assigned)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">last_played_date</td>
                                <td class="px-4 py-2 text-sm text-gray-500">date</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Date when client last played (default: current date)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "message": "Client added successfully",
  "client_id": 1543,
  "client": {
    "id": 1543,
    "client_id_name": "WXYZ9876",
    "mobile_number": "7654321098",
    "deposit_amount": 8000,
    "deposit_tag": "Under 10K",
    "last_played_date": "2025-04-28",
    "days_not_played": 0,
    "created_by": 1,
    "created_at": "2025-04-28 15:30:45"
  }
}</code></pre>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Example Request</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>POST /client_management_api.php
Content-Type: application/json
Authorization: Bearer {your_api_token}

{
  "action": "addClient",
  "client_id_name": "WXYZ9876",
  "mobile_number": "7654321098",
  "deposit_amount": 8000
}</code></pre>
                </div>
                
                <div class="mt-4 bg-green-50 border border-green-200 rounded-md p-4">
                    <h4 class="text-lg font-medium mb-2 flex items-center">
                        <i class="fas fa-flask mr-2 text-green-600"></i>
                        Test This Endpoint
                    </h4>
                    <form id="addClientForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Client ID/Name <span class="text-red-500">*</span></label>
                                <input type="text" name="client_id_name" required class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number <span class="text-red-500">*</span></label>
                                <input type="text" name="mobile_number" required class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Deposit Amount</label>
                                <input type="number" name="deposit_amount" min="0" class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Last Played Date</label>
                                <input type="date" name="last_played_date" class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <i class="fas fa-play mr-2"></i>
                                Test Request
                            </button>
                        </div>
                    </form>
                    <div class="mt-4">
                        <h5 class="text-sm font-medium text-gray-700 mb-1">Response:</h5>
                        <div id="addClientResponse" class="bg-gray-800 text-green-400 p-3 rounded-md response-area overflow-auto">
                            <code>// Response will appear here</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Update Client Endpoint -->
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-put px-3 py-1 rounded-md font-medium text-sm mr-3">PUT</span>
                    <h3 class="text-xl font-semibold">/updateClient</h3>
                </div>
                <p class="mb-4">Updates an existing client record in the master client list.</p>
                
                <h4 class="text-lg font-medium mb-2">Request Body</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">client_id</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Yes</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Database ID of the client to update</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">client_id_name</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">New identifier or name for the client</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">mobile_number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Updated mobile number</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">deposit_amount</td>
                                <td class="px-4 py-2 text-sm text-gray-500">number</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Updated deposit amount (tag will be auto-updated)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">last_played_date</td>
                                <td class="px-4 py-2 text-sm text-gray-500">date</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Updated date when client last played</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "message": "Client updated successfully",
  "client": {
    "id": 1543,
    "client_id_name": "WXYZ9876_UPDATED",
    "mobile_number": "7654321099",
    "deposit_amount": 12000,
    "deposit_tag": "Under 15K",
    "last_played_date": "2025-04-29",
    "days_not_played": 0,
    "updated_at": "2025-04-29 10:15:30"
  }
}</code></pre>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Example Request</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>PUT /client_management_api.php
Content-Type: application/json
Authorization: Bearer {your_api_token}

{
  "action": "updateClient",
  "client_id": 1543,
  "client_id_name": "WXYZ9876_UPDATED",
  "mobile_number": "7654321099",
  "deposit_amount": 12000,
  "last_played_date": "2025-04-29"
}</code></pre>
                </div>
                
                <div class="mt-4 bg-yellow-50 border border-yellow-200 rounded-md p-4">
                    <h4 class="text-lg font-medium mb-2 flex items-center">
                        <i class="fas fa-flask mr-2 text-yellow-600"></i>
                        Test This Endpoint
                    </h4>
                    <form id="updateClientForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Client ID (Database) <span class="text-red-500">*</span></label>
                                <input type="number" name="client_id" required class="w-full rounded-md border-gray-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Client ID/Name</label>
                                <input type="text" name="client_id_name" class="w-full rounded-md border-gray-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label>
                                <input type="text" name="mobile_number" class="w-full rounded-md border-gray-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Deposit Amount</label>
                                <input type="number" name="deposit_amount" min="0" class="w-full rounded-md border-gray-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Last Played Date</label>
                                <input type="date" name="last_played_date" class="w-full rounded-md border-gray-300 shadow-sm focus:border-yellow-500 focus:ring-yellow-500">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
                                <i class="fas fa-play mr-2"></i>
                                Test Request
                            </button>
                        </div>
                    </form>
                    <div class="mt-4">
                        <h5 class="text-sm font-medium text-gray-700 mb-1">Response:</h5>
                        <div id="updateClientResponse" class="bg-gray-800 text-green-400 p-3 rounded-md response-area overflow-auto">
                            <code>// Response will appear here</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Delete Client Endpoint -->
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-delete px-3 py-1 rounded-md font-medium text-sm mr-3">DELETE</span>
                    <h3 class="text-xl font-semibold">/deleteClient</h3>
                </div>
                <p class="mb-4">Deletes a client record from the master client list.</p>
                
                <h4 class="text-lg font-medium mb-2">Parameters</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">client_id</td>
                                <td class="px-4 py-2 text-sm text-gray-500">integer</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Yes</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Database ID of the client to delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "message": "Client deleted successfully",
  "deleted_id": 1543
}</code></pre>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Example Request</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>DELETE /client_management_api.php?action=deleteClient&client_id=1543

// With authentication header
Authorization: Bearer {your_api_token}</code></pre>
                </div>
                
                <div class="mt-4 bg-red-50 border border-red-200 rounded-md p-4">
                    <h4 class="text-lg font-medium mb-2 flex items-center">
                        <i class="fas fa-flask mr-2 text-red-600"></i>
                        Test This Endpoint
                    </h4>
                    <form id="deleteClientForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Client ID (Database) <span class="text-red-500">*</span></label>
                            <input type="number" name="client_id" required class="w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                <i class="fas fa-play mr-2"></i>
                                Test Request
                            </button>
                        </div>
                    </form>
                    <div class="mt-4">
                        <h5 class="text-sm font-medium text-gray-700 mb-1">Response:</h5>
                        <div id="deleteClientResponse" class="bg-gray-800 text-green-400 p-3 rounded-md response-area overflow-auto">
                            <code>// Response will appear here</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Additional Endpoints -->
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-get px-3 py-1 rounded-md font-medium text-sm mr-3">GET</span>
                    <h3 class="text-xl font-semibold">/getClientsByDepositTag</h3>
                </div>
                <p class="mb-4">Retrieves clients grouped by deposit tags with counts.</p>
                
                <h4 class="text-lg font-medium mb-2">Parameters</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">period</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Period for analysis: 'all', 'month', 'week', 'today' (default: 'all')</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "period": "all",
  "deposit_tags": {
    "Under 5K": 324,
    "Under 10K": 412,
    "Under 15K": 287,
    "Under 20K": 198,
    "Under 30K": 156,
    "Under 50K": 95,
    "More than 50K": 70
  },
  "total_clients": 1542
}</code></pre>
                </div>
            </div>
            
            <div class="endpoint-section pl-4 mb-10">
                <div class="flex items-center mb-3">
                    <span class="method-get px-3 py-1 rounded-md font-medium text-sm mr-3">GET</span>
                    <h3 class="text-xl font-semibold">/getClientsByNonPlayingDays</h3>
                </div>
                <p class="mb-4">Retrieves clients grouped by non-playing days ranges with counts.</p>
                
                <h4 class="text-lg font-medium mb-2">Parameters</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="min-w-full parameter-table">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Name</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Type</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Required</th>
                                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 text-sm text-gray-900">group_by</td>
                                <td class="px-4 py-2 text-sm text-gray-500">string</td>
                                <td class="px-4 py-2 text-sm text-gray-500">No</td>
                                <td class="px-4 py-2 text-sm text-gray-500">Grouping method: 'ranges', 'exact' (default: 'ranges')</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h4 class="text-lg font-medium mb-2">Response</h4>
                <div class="bg-gray-100 p-3 rounded-md mb-4">
                    <pre><code>{
  "status": "success",
  "group_by": "ranges",
  "non_playing_days": {
    "0 days": 125,
    "1-3 days": 287,
    "4-7 days": 345,
    "8-14 days": 312,
    "15-30 days": 256,
    "31-60 days": 142,
    "60+ days": 75
  },
  "total_clients": 1542
}</code></pre>
                </div>
            </div>
        </div>
        
        <!-- Implementation Notes -->
        <div class="bg-white shadow rounded-lg p-6">
            <h2 class="text-2xl font-semibold mb-4">Implementation Notes</h2>
            
            <div class="mb-6">
                <h3 class="text-xl font-medium mb-3">PHP Implementation Details</h3>
                <div class="bg-gray-100 p-3 rounded-md">
                    <pre><code>/**
 * client_management_api.php
 * 
 * API endpoint for managing master client list operations
 * 
 * This API handles:
 * - Retrieving clients with filtering options
 * - Adding new clients
 * - Updating existing clients
 * - Deleting clients
 * - Analytics for client data
 */

// Required includes
require_once 'config.php';
require_once 'functions.php';
require_once 'auth_helpers.php';

// Set headers
header('Content-Type: application/json');

// Authenticate request
if (!authenticate_request()) {
    echo json_encode(['status' => 'error', 'message' => 'Unauthorized access']);
    exit;
}

// Get request method
$method = $_SERVER['REQUEST_METHOD'];

// Determine action based on method and parameters
$action = '';
if ($method === 'GET') {
    $action = isset($_GET['action']) ? $_GET['action'] : 'getClients';
} else {
    // For POST, PUT, DELETE methods
    $json = file_get_contents('php://input');
    $data = json_decode($json, true);
    $action = isset($data['action']) ? $data['action'] : '';
    
    // Alternative for form data
    if (empty($action) && isset($_POST['action'])) {
        $action = $_POST['action'];
        $data = $_POST;
    }
}

// Route to appropriate handler
switch ($action) {
    case 'getClients':
        handleGetClients();
        break;
    case 'addClient':
        handleAddClient($data);
        break;
    case 'updateClient':
        handleUpdateClient($data);
        break;
    case 'deleteClient':
        handleDeleteClient();
        break;
    case 'getClientsByDepositTag':
        handleGetClientsByDepositTag();
        break;
    case 'getClientsByNonPlayingDays':
        handleGetClientsByNonPlayingDays();
        break;
    default:
        echo json_encode(['status' => 'error', 'message' => 'Invalid action']);
        break;
}

/**
 * Handler functions for each action
 */

// Implementation of handler functions...
</code></pre>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-medium mb-3">Deposit Tag Assignment</h3>
                <div class="bg-gray-100 p-3 rounded-md">
                    <pre><code>/**
 * Assigns a deposit tag based on amount
 * 
 * @param float $amount Deposit amount
 * @return string The appropriate deposit tag
 */
function assignDepositTag($amount) {
    if ($amount < 5000) return "Under 5K";
    if ($amount < 10000) return "Under 10K";
    if ($amount < 15000) return "Under 15K";
    if ($amount < 20000) return "Under 20K";
    if ($amount < 30000) return "Under 30K";
    if ($amount < 50000) return "Under 50K";
    return "More than 50K";
}</code></pre>
                </div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-medium mb-3">Days Not Played Calculation</h3>
                <div class="bg-gray-100 p-3 rounded-md">
                    <pre><code>/**
 * Updates days_not_played for all clients
 * 
 * @param PDO $pdo Database connection
 * @return bool Success status
 */
function updateDaysNotPlayed($pdo) {
    try {
        $query = "UPDATE master_clients SET days_not_played = 
                  DATEDIFF(CURRENT_DATE, IFNULL(last_played_date, created_at))";
        $stmt = $pdo->prepare($query);
        return $stmt->execute();
    } catch (PDOException $e) {
        error_log("Error updating days_not_played: " . $e->getMessage());
        return false;
    }
}</code></pre>
                </div>
            </div>
            
            <div>
                <h3 class="text-xl font-medium mb-3">Error Handling</h3>
                <div class="bg-gray-100 p-3 rounded-md">
                    <pre><code>/**
 * Sends an error response
 * 
 * @param string $message Error message
 * @param int $code HTTP status code
 * @return void
 */
function sendErrorResponse($message, $code = 400) {
    http_response_code($code);
    echo json_encode([
        'status' => 'error',
        'message' => $message
    ]);
    exit;
}</code></pre>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white shadow mt-8">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-gray-500">Â© 2025 Client Calling & Follow-up CRM</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-book"></i>
                        <span class="ml-1">Documentation</span>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-question-circle"></i>
                        <span class="ml-1">Support</span>
                    </a>
                    <a href="#" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-code"></i>
                        <span class="ml-1">API Version 1.0</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Simulation code for API testing (this would be replaced with actual AJAX calls in production)
        document.getElementById('getClientsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const params = new URLSearchParams();
            
            formData.forEach((value, key) => {
                if (value) params.append(key, value);
            });
            
            // Simulate API response
            const responseEl = document.getElementById('getClientsResponse');
            responseEl.innerHTML = `<code>// Sending request to: GET /client_management_api.php?action=getClients&${params.toString()}</code>`;
            
            setTimeout(() => {
                const mockResponse = {
                    status: "success",
                    total_clients: 1542,
                    page: 1,
                    per_page: 50,
                    total_pages: 31,
                    clients: [
                        {
                            id: 1,
                            client_id_name: "ABCD1234",
                            mobile_number: "9876543210",
                            deposit_amount: 12500,
                            deposit_tag: "Under 15K",
                            last_played_date: "2025-04-20",
                            days_not_played: 8,
                            created_by: 2,
                            created_at: "2025-01-15 10:30:45"
                        },
                        {
                            id: 2,
                            client_id_name: "EFGH5678",
                            mobile_number: "8765432109",
                            deposit_amount: 45000,
                            deposit_tag: "Under 50K",
                            last_played_date: "2025-04-25",
                            days_not_played: 3,
                            created_by: 3,
                            created_at: "2025-01-20 14:15:30"
                        }
                    ]
                };
                responseEl.innerHTML = `<code>${JSON.stringify(mockResponse, null, 2)}</code>`;
            }, 500);
        });
        
        document.getElementById('addClientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = {};
            
            formData.forEach((value, key) => {
                if (value) data[key] = value;
            });
            
            // Simulate API response
            const responseEl = document.getElementById('addClientResponse');
            responseEl.innerHTML = `<code>// Sending request to: POST /client_management_api.php\n// With data: ${JSON.stringify(data)}</code>`;
            
            setTimeout(() => {
                // Generate deposit tag based on amount
                let depositTag = "Under 5K";
                if (data.deposit_amount) {
                    const amount = parseFloat(data.deposit_amount);
                    if (amount >= 50000) depositTag = "More than 50K";
                    else if (amount >= 30000) depositTag = "Under 50K";
                    else if (amount >= 20000) depositTag = "Under 30K";
                    else if (amount >= 15000) depositTag = "Under 20K";
                    else if (amount >= 10000) depositTag = "Under 15K";
                    else if (amount >= 5000) depositTag = "Under 10K";
                }
                
                const mockResponse = {
                    status: "success",
                    message: "Client added successfully",
                    client_id: 1543,
                    client: {
                        id: 1543,
                        client_id_name: data.client_id_name,
                        mobile_number: data.mobile_number,
                        deposit_amount: data.deposit_amount ? parseFloat(data.deposit_amount) : 0,
                        deposit_tag: depositTag,
                        last_played_date: data.last_played_date || new Date().toISOString().split('T')[0],
                        days_not_played: 0,
                        created_by: 1,
                        created_at: new Date().toISOString().replace('T', ' ').substring(0, 19)
                    }
                };
                responseEl.innerHTML = `<code>${JSON.stringify(mockResponse, null, 2)}</code>`;
            }, 500);
        });
        
        document.getElementById('updateClientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = {};
            
            formData.forEach((value, key) => {
                if (value) data[key] = value;
            });
            
            // Simulate API response
            const responseEl = document.getElementById('updateClientResponse');
            responseEl.innerHTML = `<code>// Sending request to: PUT /client_management_api.php\n// With data: ${JSON.stringify(data)}</code>`;
            
            setTimeout(() => {
                if (!data.client_id) {
                    responseEl.innerHTML = `<code>{"status": "error", "message": "Client ID is required"}</code>`;
                    return;
                }
                
                // Generate deposit tag based on amount
                let depositTag = "Under 5K";
                if (data.deposit_amount) {
                    const amount = parseFloat(data.deposit_amount);
                    if (amount >= 50000) depositTag = "More than 50K";
                    else if (amount >= 30000) depositTag = "Under 50K";
                    else if (amount >= 20000) depositTag = "Under 30K";
                    else if (amount >= 15000) depositTag = "Under 20K";
                    else if (amount >= 10000) depositTag = "Under 15K";
                    else if (amount >= 5000) depositTag = "Under 10K";
                }
                
                const mockResponse = {
                    status: "success",
                    message: "Client updated successfully",
                    client: {
                        id: parseInt(data.client_id),
                        client_id_name: data.client_id_name || "WXYZ9876_UPDATED",
                        mobile_number: data.mobile_number || "7654321099",
                        deposit_amount: data.deposit_amount ? parseFloat(data.deposit_amount) : 12000,
                        deposit_tag: depositTag,
                        last_played_date: data.last_played_date || new Date().toISOString().split('T')[0],
                        days_not_played: 0,
                        updated_at: new Date().toISOString().replace('T', ' ').substring(0, 19)
                    }
                };
                responseEl.innerHTML = `<code>${JSON.stringify(mockResponse, null, 2)}</code>`;
            }, 500);
        });
        
        document.getElementById('deleteClientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = {};
            
            formData.forEach((value, key) => {
                if (value) data[key] = value;
            });
            
            // Simulate API response
            const responseEl = document.getElementById('deleteClientResponse');
            responseEl.innerHTML = `<code>// Sending request to: DELETE /client_management_api.php?action=deleteClient&client_id=${data.client_id}</code>`;
            
            setTimeout(() => {
                if (!data.client_id) {
                    responseEl.innerHTML = `<code>{"status": "error", "message": "Client ID is required"}</code>`;
                    return;
                }
                
                const mockResponse = {
                    status: "success",
                    message: "Client deleted successfully",
                    deleted_id: parseInt(data.client_id)
                };
                responseEl.innerHTML = `<code>${JSON.stringify(mockResponse, null, 2)}</code>`;
            }, 500);
        });
    </script>
</body>
</html>
